# 画面設計（UDC2025）

最終更新日: 2025-10-18

## 1. サイトマップ（ドラフト）
- / （マップ：デフォルト画面）
- /help （使い方）

## 2. ページ定義テンプレ
### P-XX: 画面名
- URL: 
- 目的: 
- 表示要素:
  - ヘッダー
  - メイン
  - フッター
- コンポーネント:
  - フォーム: 入力項目（ラベル/型/必須/バリデーション）
  - テーブル: 列/並び替え/フィルタ/ページング
- エラーメッセージ方針:
- レスポンシブ:

## 3. 主要画面仕様（ドラフト）

### P-01: マップ画面
- URL: /
- 目的: 現在地周辺の対象カテゴリ（AED、医療機関、公衆無線LAN、指定緊急避難場所、公衆トイレ）を地図で表示。
- 表示要素:
  - ヘッダー: タイトル
  - メイン: Leaflet地図
  - コントロール: 現在地ボタン、更新ボタン
  - カテゴリボタン: AED、医療機関、公衆無線LAN、指定緊急避難場所、公衆トイレ

## 6. 地図ズームレベル参考
- Leafletズーム4：日本全域＋周辺国
- Leafletズーム5：日本列島が画面いっぱい（都道府県境界が見える）
- 市区町村級：ズーム10～12
- 建物単位：ズーム16～18

## 7. カテゴリと動作
- カテゴリ: AED、医療機関、公衆無線LAN、指定緊急避難場所、公衆トイレ
- 振る舞い:
  - 初回: Geolocation取得を試行（タイムアウト5秒）。拒否/失敗→指定座標（福岡SRPセンタービル：33.5902, 130.3519）中心・ズーム16（建物単位）で表示し、デフォルトカテゴリはAEDを選択。
  - カテゴリ切替: ボタンをクリックしてカテゴリを切り替え。地図中心周辺のデータを自動再取得し、マーカーを表示。
  - 地図操作: パン・ズーム時に移動距離が閾値（2000m）を超えたら自動データ再取得。
  - ピン詳細: ポップアップで以下を表示。未登録項目は「データ未登録」と表示。
    - 名称
    - 住所
    - 電話番号
    - 営業時間
    - 備考
  - 経路案内: ポップアップ内の「ここへ行く」リンクをクリック→GoogleマップのDirections APIで外部マップ連携。URL: https://www.google.com/maps/dir/?api=1&destination=lat,lng